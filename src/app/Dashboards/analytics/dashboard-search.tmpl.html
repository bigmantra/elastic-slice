<md-content class="md-sidenav-push-in-target" flex="" layout-padding="">


  <div class="dashboard-container overlay-10 padded-content-page md-sidenav-push-in-target" layout="column">

    <div eui-index="'nps'" eui-highlight="ejs.Highlight(['_all']).preTags('<mark>').postTags('</mark>')"
         eui-enabled="true">

      <div layout="column" layout-margin>


        <div layout="row" layout-align="center center">
          <eui-searchbox flex="80" field="'_all'"></eui-searchbox>
          <md-input-container>
            <label>Pg. Size</label>
            <md-select ng-model="indexVM.pageSize">
              <md-option ng-repeat="item in [5,10, 20, 50, 100]">{{item}}</md-option>
            </md-select>
          </md-input-container>
          <md-input-container>
            <label>Type</label>
            <md-select ng-model="vm.queryType">
              <md-option ng-repeat="item in ['MatchQuery','FuzzyQuery', 'WildcardQuery']">{{item}}</md-option>
            </md-select>
          </md-input-container>
        </div>


      </div>



      <md-content layout="column">

        <md-sidenav flex class="md-sidenav-right md-whiteframe-z2" md-component-id="rightsidebar">
          <md-toolbar class="md-theme-light">
            <h1 class="md-toolbar-tools">Filters</h1>
          </md-toolbar>
          <md-content class="content-wrapper md-padding"  id="sidenavcontent">
            <div flex>
              <md-content>
                <eui-checklist field="'salesRep'" size="8"></eui-checklist>
                <eui-checklist field="'surveyYear'" size="8"></eui-checklist>
                <eui-checklist field="'surveyMonth'" size="12"></eui-checklist>
                <eui-checklist field="'productFamily'" size="5"></eui-checklist>
                <eui-checklist field="'practiceArea'" size="5"></eui-checklist>
                <eui-checklist field="'rating'" size="10"></eui-checklist>
                <eui-checklist field="'customerAccountName.raw'" size="10"></eui-checklist>
                <eui-checklist field="'decisionLevel'" size="5"></eui-checklist>
                <eui-checklist field="'continuedUse'" size="5"></eui-checklist>
                <eui-checklist field="'customerReference'" size="5"></eui-checklist>
              </md-content>
            </div>
          </md-content>
        </md-sidenav>



        <md-toolbar layout="row" class="md-toolbar-tools">

          <h3>Results</h3>
          <span  style="margin-left: 30px;margin-right: 12px;font-size: 12px">Showing {{((indexVM.page-1) * indexVM.pageSize)+1}} to {{indexVM.page * indexVM.pageSize}} of {{indexVM.results.hits.total}} Records</span>
          <div layout-align="right center" class="paging disable-large" layout="row" paging
               page="indexVM.page"
               page-size="indexVM.pageSize"
               adjacent="2"
               total="indexVM.results.hits.total>9000?9000:indexVM.results.hits.total" scroll-top="true"
               hide-if-empty="true"
               show-prev-next="true"
               show-first-last="true">
          </div>


          <span flex></span>




          <md-button class="md-icon-button toolbar-button disable-small"
                     ng-click="vm.openSidebar('rightsidebar')"
                     aria-label="search filters">
            <md-icon md-font-icon="fa fa-filter"></md-icon>
          </md-button>


        </md-toolbar>


        <md-content layout="row" layout-align="center top">

          <div flex class="search-result-body dotted">
            <md-list>
              <md-list-item class="md-3-line" ng-repeat="item in indexVM.results.hits.hits"
                            ng-click="vm.showDetailsDialog($event,item)" layout-wrap>
                <img ng-src="https://logo.clearbit.com/{{::item._source.domain}}" class="md-avatar" alt="{{::item._source.customerAccountName}}"/>
                <div class="md-list-item-text">
                  <h3 style="color: rgb(0,188,212)">{{::item._source.customerAccountName}} <span style="font-size: 10px;">(Responded to NPS Survey on {{::item._source.surveyDate | date}})</span>
                  </h3>
                  <p ng-if="item.highlight" ng-bind-html="'....' + item.highlight._all[0]"></p>
                  <p ng-if="!item.highlight"> {{item._source.NPSComment}}</p>
                  <p ng-if="!item.highlight"> {{item._source.suggestionsToImprove}}></p>
                </div>

                <div>
                  <md-icon style="color: limegreen; font-size: 32px;" md-font-icon="fa fa-smile-o fa-6"
                           ng-show="item._source.rating > 8">
                    <md-tooltip>
                      {{item._source.rating}}
                    </md-tooltip>
                  </md-icon>
                  <md-icon style="color: red; font-size: 32px;" md-font-icon="fa fa-frown-o fa-6"
                           ng-show="item._source.rating < 6">
                    <md-tooltip>
                      {{item._source.rating}}
                    </md-tooltip>
                  </md-icon>
                  <md-icon style="color: orange; font-size: 32px;" md-font-icon="fa fa-meh-o"
                           ng-show="item._source.rating > 5 && item._source.rating < 9">
                    <md-tooltip>
                      {{item._source.rating}}
                    </md-tooltip>
                  </md-icon>
                </div>

              </md-list-item>
              <md-divider md-inset></md-divider>


            </md-list>


          </div>


          <md-content layout="column" class="content-wrapper md-padding disable-large" flex="30" id="content">
            <div flex>
              <md-content>
                <eui-checklist field="'salesRep'" size="8"></eui-checklist>
                <eui-checklist field="'surveyYear'" size="8"></eui-checklist>
                <eui-checklist field="'surveyMonth'" size="12"></eui-checklist>
                <eui-checklist field="'productFamily'" size="5"></eui-checklist>
                <eui-checklist field="'practiceArea'" size="5"></eui-checklist>
                <eui-checklist field="'rating'" size="10"></eui-checklist>
                <eui-checklist field="'customerAccountName.raw'" size="10"></eui-checklist>
                <eui-checklist field="'decisionLevel'" size="5"></eui-checklist>
                <eui-checklist field="'continuedUse'" size="5"></eui-checklist>
                <eui-checklist field="'customerReference'" size="5"></eui-checklist>
              </md-content>
            </div>
          </md-content>


          <!--
                <ng-include ng-if="!item.highlight"
                            src="'app/Dashboards/analytics/response-details-table.tmpl.html'">
                </ng-include>-->


    </div>


  </div>
  </div>
</md-content>
